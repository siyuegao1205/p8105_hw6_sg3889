P8105 Homework 6
================
Siyue Gao
2022-11-28

``` r
library(tidyverse)
```

``` r
theme_set(theme_minimal() + theme(legend.position = "bottom"))
options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)
scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
```

## Problem 2

### Data Cleaning

Import the data.

``` r
homicide = read_csv("data/homicide-data.csv")
```

Create a `city_state` variable and a `status` binary variable indicating
whether the homicide is solved. Omit cities without victim race reported
and those with data entry mistake.

``` r
homicide = homicide %>% 
  mutate(
    state = str_to_upper(state),
    city_state = str_c(city, ", ", state),
    status = case_when(
      disposition == "Closed by arrest"      ~ "resolved",
      disposition == "Closed without arrest" ~ "unresolved",
      disposition == "Open/No arrest"        ~ "unresolved",
      TRUE                                   ~ ""
    )
  ) %>% 
  filter(!(city_state %in% c("Dallas, TX", "Phoenix, AZ", "Kansas City, MO", "Tulsa, AL")))
```

Limit the analysis to those whom `victim_race` is `white` or `black`.
Change `victim_age` into numeric.

``` r
homicide_sub = homicide %>% 
  filter(victim_race %in% c("Black", "White")) %>% 
  mutate(victim_age = as.numeric(victim_age))
```
